<body>
    <!-- Sidebar -->
    <div>
      <app-side-bar-admin></app-side-bar-admin>
    </div>
  
    <!-- Header -->
    <header>
      <h1 class="main-title">Search Patient Profiles</h1>
    </header>
  
    <!-- Filters Section -->
    <div class="filters">
      <!-- Filters Loop -->
      <div
        class="filter-row"
        *ngFor="let filter of queryFiltersList; let i = index"
      >
        <input
          type="text"
          placeholder="Patient First Name"
          [(ngModel)]="filter.firstName"
          class="filter-input"
        />
        <input
          type="text"
          placeholder="Patient Last Name"
          [(ngModel)]="filter.lastName"
          class="filter-input"
        />
        <input
          type="email"
          placeholder="Email"
          [(ngModel)]="filter.email"
          class="filter-input"
        />
        <input
        type="text"
        placeholder="Medical Record Number"
        [(ngModel)]="filter.medicalRecordNumber"
        class="filter-input"
        />
        <label for="dateBirth">Date of Birth:</label>
        <input id="dateBirth" type="date" placeholder="Date Of Birth" [(ngModel)]="filter.dateBirth"
        />
        <!-- Remove Button: Disabled for the First (Default) Filter -->
        <button
          *ngIf="i > 0"
          (click)="removeFilter(i)"
          class="remove-filter"
        >
          Remove
        </button>
      </div>
  
      <!-- Add Filter Button -->
      <button (click)="addFilter()" class="add-filter-button">Add Filter</button>
  
      <!-- Apply Filters -->
      <button (click)="applyFilters()" class="search-button">Search</button>
    </div>
  
    <!-- Results Section -->
    <div class="conteudo">
      <!-- Table for Patient List -->
      <div *ngIf="patientList && patientList.length > 0">
        <p-table
          [value]="patientList"
          [(selection)]="selectedPatient"
          selectionMode="single"
          [tableStyle]="{ 'border-collapse': 'collapse', 'table-layout': 'fixed', width: '100%' }"
        >
          <ng-template pTemplate="header">
            <tr>
              <th style="width: 10%;">Select</th>
              <th style="width: 15%;">Patient Name</th>
              <th style="width: 15%;">Medical Record Number</th>
              <th style="width: 30%;">Email</th>
              <th style="width: 30%;">Phone</th>
              <th style="width: 30%;">Date of Birth</th>
              <th style="width: 30%;">Address</th>
            </tr>
          </ng-template>
  
          <ng-template pTemplate="body" let-patient>
            <tr [pSelectableRow]="patient">
              <td>
                <p-tableRadioButton
                  [value]="patient"
                  [name]="'patientRadio'"
                ></p-tableRadioButton>
              </td>
              <td>{{ patient.name || '-' }}</td>
              <td>{{ patient.patientId || '-' }}</td>
              <td>{{ patient.email || '-' }}</td>
              <td>{{ patient.phone || '-' }}</td>
              <td>{{ patient.dateBirth || '-' }}</td>
              <td>{{ patient.address || '-' }}</td>
            </tr>
          </ng-template>
        </p-table>
  
        <!-- Action Buttons -->
        <div *ngIf="selectedPatient" class="action-buttons">
          <button (click)="editPatientProfile(selectedPatient)">
            Edit Patient Profile
          </button>
          <button (click)="deletePatientProfile(selectedPatient)">
            Delete Patient Profile
          </button>
          <button (click)="toggleDetails(selectedPatient)">Show Details</button>
        </div>
      </div>
  
      <!-- Patient Details -->
      <div *ngIf="detailsVisible" class="patient-details">
        <h3>Patient Profile Details</h3>
        <p><strong>Name:</strong> {{ fullPatient.name || '-' }}</p>
        <p><strong>Medical Record Number:</strong> {{ fullPatient.patientId || '-' }}</p>
        <p><strong>Phone Number:</strong> {{ fullPatient.phone || '-' }}</p>
        <p><strong>Email:</strong> {{ fullPatient.email || '-' }}</p>
        <p><strong>Address:</strong> {{ fullPatient.address || '-' }}</p>
        <p><strong>Date of Birth:</strong> {{ fullPatient.dateBirth || '-' }}</p>
  
        <div class="action-buttons">
          <button (click)="closeDetails()">Close</button>
        </div>
      </div>
    </div>
  
    <app-message></app-message>
  </body>
  